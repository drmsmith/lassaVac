"0","# obtain all region names to loop through"
"0","all_regions = unique(all_df$Region)"
"0",""
"0","# create table: country, region, year, n age groups, age range "
"0","all_age_ranges = purrr::map(all_regions, function(.x) {"
"0","  ages = unique(c(all_df[all_df$Region==.x,'Age_min'],       # all ages for range "
"0","                  all_df[all_df$Region==.x,'Age_max']))"
"0","  range = paste(range(ages, na.rm=T), collapse="" - "")       # format [min - max]"
"0","  ncats = length(unique(all_df[all_df$Region==.x,'Age_min'])) # n age categories "
"0","  country = unique(all_df[all_df$Region==.x,'Country'])"
"0","  year = paste(unique(all_df[all_df$Region==.x,'Year']), collapse=', ')"
"0","  # putting everything together into a named vector "
"0","  return(c(country = country, region = .x, year = year, n = ncats, range = range))"
"0","}) %>% # convert to data frame >> combine >> transpose >> convert back to data frame"
"0","  purrr::map(., as.data.frame) %>% list_cbind(.) %>% t %>% data.frame"
"2","New names:"
"0","# remove all rownames"
"0","rownames(all_age_ranges) = NULL "
